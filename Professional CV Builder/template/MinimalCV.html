<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional CV Builder</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #2980b9;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --border-color: #dfe6e9;
            --success-color: #28a745;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 30px auto;
            background-color: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            border-top: 5px solid var(--secondary-color);
        }

        .cv-header {
            display: flex;
            justify-content: space-between;
            padding: 30px;
            border-bottom: 2px solid var(--border-color);
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
        }

        .header-content {
            flex: 1;
        }

        .header-content h1 {
            font-size: 28px;
            color: var(--primary-color);
            margin-bottom: 5px;
            font-weight: 700;
        }

        .header-content h2 {
            font-size: 18px;
            color: var(--secondary-color);
            font-weight: normal;
            margin-bottom: 15px;
        }

        .contact-info p {
            margin: 3px 0;
            font-size: 14px;
        }

        .photo-container {
            width: 150px;
            height: 180px;
            border: 3px solid var(--secondary-color);
            overflow: hidden;
            border-radius: 4px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .photo-container:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .photo-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-weight: 500;
        }

        .photo-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cv-body {
            padding: 30px;
            background-color: white;
        }

        .section {
            margin-bottom: 25px;
            padding: 15px;
            border-radius: 4px;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .section:hover {
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 18px;
            color: var(--primary-color);
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 5px;
            margin-bottom: 15px;
            position: relative;
            font-weight: 600;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: var(--accent-color);
        }

        .section-content p {
            margin: 8px 0;
        }

        .education-item, .experience-item {
            margin-bottom: 20px;
            padding: 15px;
            border-left: 3px solid var(--secondary-color);
            background-color: #f8f9fa;
            border-radius: 0 4px 4px 0;
            transition: all 0.3s ease;
        }

        .education-item:hover, .experience-item:hover {
            background-color: #e9ecef;
            transform: translateX(5px);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .item-title {
            font-weight: bold;
            color: var(--primary-color);
        }

        .item-subtitle {
            color: #555;
            font-style: italic;
        }

        .item-date {
            color: var(--secondary-color);
            font-weight: 500;
        }

        .skills-list {
            columns: 2;
            column-gap: 30px;
        }

        .skill-item {
            margin-bottom: 8px;
            position: relative;
            padding-left: 15px;
            break-inside: avoid;
        }

        .skill-item::before {
            content: "•";
            color: var(--secondary-color);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .personal-details {
            width: 100%;
            border-collapse: collapse;
        }

        .personal-details tr:hover {
            background-color: #f8f9fa;
        }

        .personal-details td {
            padding: 8px 0;
            vertical-align: top;
            border-bottom: 1px solid var(--border-color);
        }

        .personal-details td:first-child {
            width: 30%;
            font-weight: bold;
            color: var(--primary-color);
        }

        .personal-details td:nth-child(2) {
            width: 5%;
        }

        .declaration {
            margin-top: 30px;
            font-style: italic;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            border-left: 3px solid var(--secondary-color);
        }

        .signature {
            margin-top: 50px;
            text-align: right;
        }

        .signature p {
            margin-top: 30px;
            display: inline-block;
            padding: 5px 20px;
            border-top: 1px solid var(--primary-color);
        }

        /* Form Styles */
        .builder-container {
            max-width: 800px;
            margin: 30px auto;
            padding: 30px;
            background-color: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .form-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .form-header h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-weight: 700;
        }

        .form-header p {
            color: #6c757d;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .form-control:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
            outline: none;
        }

        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .btn {
            padding: 12px 24px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-size: 16px;
        }

        .btn:hover {
            background-color: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background-color: #6c757d;
        }

        .btn-secondary:hover {
            background-color: #5a6268;
        }

        .btn-success {
            background-color: var(--success-color);
        }

        .btn-success:hover {
            background-color: #218838;
        }

        .remove-btn {
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            font-size: 12px;
            transition: all 0.3s;
        }

        .remove-btn:hover {
            background-color: #c82333;
            transform: translateY(-1px);
        }

        .hidden {
            display: none;
        }

        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .floating-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .progress-bar {
            height: 4px;
            background-color: var(--secondary-color);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
            transition: width 0.3s;
        }

        .section-counter {
            display: inline-block;
            background-color: var(--secondary-color);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 12px;
            margin-right: 10px;
        }

        @media print {
            body {
                background-color: white;
            }
            .container {
                box-shadow: none;
                border: none;
            }
            .no-print {
                display: none;
            }
            .section {
                box-shadow: none;
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {
            .cv-header {
                flex-direction: column;
            }
            .photo-container {
                margin: 20px auto;
                order: -1;
            }
            .skills-list {
                columns: 1;
            }
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            .action-buttons {
                flex-direction: column;
                gap: 10px;
            }
            .floating-button {
                bottom: 20px;
                right: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="progress-bar no-print" id="progressBar"></div>
    
    <div class="builder-container no-print" id="builder">
        <div class="form-header">
            <h1>Professional CV Builder</h1>
            <p>Create an impressive CV in minutes</p>
        </div>
        
        <h2 class="section-title"><span class="section-counter">1</span> Personal Information</h2>
        <div class="form-row">
            <div class="form-group" style="flex: 2;">
                <label for="fullName">Full Name</label>
                <input type="text" id="fullName" class="form-control" placeholder="John Doe">
            </div>
            <div class="form-group">
                <label for="photo">Upload Photo</label>
                <input type="file" id="photo" class="form-control" accept="image/*">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" id="address" class="form-control" placeholder="123 Main St, City">
            </div>
            <div class="form-group">
                <label for="mobile">Mobile</label>
                <input type="text" id="mobile" class="form-control" placeholder="+1 234 567 890">
            </div>
        </div>
        
        <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" class="form-control" placeholder="john.doe@example.com">
        </div>
        
        <h2 class="section-title"><span class="section-counter">2</span> Career Objective</h2>
        <div class="form-group">
            <label for="careerObjective">Objective Statement</label>
            <textarea id="careerObjective" class="form-control" placeholder="Briefly describe your career goals and what you bring to the table"></textarea>
        </div>
        
        <h2 class="section-title"><span class="section-counter">3</span> Academic Qualifications</h2>
        <div id="educationItems">
            <div class="form-group" style="border: 1px solid var(--border-color); padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                <div class="form-row">
                    <div class="form-group">
                        <label>Degree</label>
                        <input type="text" class="form-control degree" placeholder="Bachelor of Science">
                    </div>
                    <div class="form-group">
                        <label>Institution</label>
                        <input type="text" class="form-control institution" placeholder="University Name">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>University</label>
                        <input type="text" class="form-control university" placeholder="University Name">
                    </div>
                    <div class="form-group">
                        <label>Result</label>
                        <input type="text" class="form-control result" placeholder="GPA: 3.8/4.0">
                    </div>
                </div>
                <button class="remove-btn remove-education">Remove</button>
            </div>
        </div>
        <button class="btn btn-secondary" id="addEducation">Add Education</button>
        
        <h2 class="section-title"><span class="section-counter">4</span> Experience</h2>
        <div id="experienceItems">
            <div class="form-group" style="border: 1px solid var(--border-color); padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                <div class="form-row">
                    <div class="form-group">
                        <label>Position</label>
                        <input type="text" class="form-control position" placeholder="Software Engineer">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" class="form-control company" placeholder="Tech Corp Inc.">
                    </div>
                </div>
                <div class="form-group">
                    <label>Duration</label>
                    <input type="text" class="form-control duration" placeholder="Jan 2020 - Present">
                </div>
                <div class="form-group">
                    <label>Responsibilities</label>
                    <textarea class="form-control responsibilities" placeholder="Describe your key responsibilities and achievements"></textarea>
                </div>
                <button class="remove-btn remove-experience">Remove</button>
            </div>
        </div>
        <button class="btn btn-secondary" id="addExperience">Add Experience</button>
        
        <h2 class="section-title"><span class="section-counter">5</span> Skills and Attributes</h2>
        <div id="skillItems">
            <div class="form-group" style="border: 1px solid var(--border-color); padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                <div class="form-group">
                    <label>Skill</label>
                    <input type="text" class="form-control skill" placeholder="Project Management">
                </div>
                <div class="form-group">
                    <label>Proficiency Level</label>
                    <select class="form-control proficiency">
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                        <option value="Expert">Expert</option>
                    </select>
                </div>
                <button class="remove-btn remove-skill">Remove</button>
            </div>
        </div>
        <button class="btn btn-secondary" id="addSkill">Add Skill</button>
        
        <h2 class="section-title"><span class="section-counter">6</span> Additional Information</h2>
        <div class="form-group">
            <label for="languageProficiency">Language Proficiency</label>
            <textarea id="languageProficiency" class="form-control" placeholder="English (Fluent), Spanish (Intermediate)"></textarea>
        </div>
        
        <div class="form-group">
            <label for="interests">Interests</label>
            <textarea id="interests" class="form-control" placeholder="Photography, Hiking, Reading"></textarea>
        </div>
        
        <h2 class="section-title"><span class="section-counter">7</span> Personal Details</h2>
        
        <div class="form-row">
            <div class="form-group">
                <label for="fatherName">Father's Name</label>
                <input type="text" id="fatherName" class="form-control" placeholder="Robert Doe">
            </div>
            <div class="form-group">
                <label for="motherName">Mother's Name</label>
                <input type="text" id="motherName" class="form-control" placeholder="Jane Doe">
            </div>
        </div>
        
        <div class="form-group">
            <label for="presentAddress">Present Address</label>
            <textarea id="presentAddress" class="form-control" placeholder="Your current address"></textarea>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="dob">Date of Birth</label>
                <input type="text" id="dob" class="form-control" placeholder="15th March 1990">
            </div>
            <div class="form-group">
                <label for="nationality">Nationality</label>
                <input type="text" id="nationality" class="form-control" placeholder="American">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="nid">NID No</label>
                <input type="text" id="nid" class="form-control" placeholder="123-456-789">
            </div>
            <div class="form-group">
                <label for="religion">Religion</label>
                <input type="text" id="religion" class="form-control" placeholder="Christian">
            </div>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="maritalStatus">Marital Status</label>
                <input type="text" id="maritalStatus" class="form-control" placeholder="Single">
            </div>
            <div class="form-group">
                <label for="currentLocation">Current Location</label>
                <input type="text" id="currentLocation" class="form-control" placeholder="New York, USA">
            </div>
        </div>
        
        <div class="form-group">
            <label for="covidId">Covid-19 ID No</label>
            <input type="text" id="covidId" class="form-control" placeholder="Vaccination ID if applicable">
        </div>
        
        <div class="action-buttons">
            <button class="btn btn-success" id="generateCV">Generate CV</button>
            <button class="btn btn-secondary" id="resetForm">Reset Form</button>
        </div>
    </div>
    
    <div class="container hidden" id="cvOutput">
        <div class="cv-header">
            <div class="header-content">
                <h1 id="cvName">Your Name</h1>
                <h2 id="cvTitle">Your Profession</h2>
                <div class="contact-info">
                    <p id="cvAddress">Your Address</p>
                    <p id="cvMobile">Mobile: Your Number</p>
                    <p id="cvEmail">Email: Your Email</p>
                </div>
            </div>
            <div class="photo-container">
                <div class="photo-placeholder" id="cvPhotoPlaceholder">Photo</div>
                <img id="cvPhoto" class="photo-preview hidden">
            </div>
        </div>

        <div class="cv-body">
            <div class="section">
                <h2 class="section-title">CAREER OBJECTIVE</h2>
                <div class="section-content">
                    <p id="cvObjective">Your career objective goes here.</p>
                </div>
            </div>

            <div class="section" id="cvEducationSection">
                <h2 class="section-title">ACADEMIC QUALIFICATION</h2>
                <div class="section-content" id="cvEducation">
                    <!-- Education items will be inserted here -->
                </div>
            </div>

            <div class="section" id="cvExperienceSection">
                <h2 class="section-title">EXPERIENCE</h2>
                <div class="section-content" id="cvExperience">
                    <!-- Experience items will be inserted here -->
                </div>
            </div>

            <div class="section" id="cvSkillsSection">
                <h2 class="section-title">SKILLS AND ATTRIBUTES</h2>
                <div class="section-content">
                    <ul class="skills-list" id="cvSkills">
                        <!-- Skills will be inserted here -->
                    </ul>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">LANGUAGE PROFICIENCY</h2>
                <div class="section-content">
                    <p id="cvLanguage">Your language proficiency details.</p>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">INTERESTS</h2>
                <div class="section-content">
                    <p id="cvInterests">Your interests and hobbies.</p>
                </div>
            </div>

            <div class="section">
                <h2 class="section-title">PERSONAL DETAILS</h2>
                <div class="section-content">
                    <table class="personal-details">
                        <tr>
                            <td>Name</td>
                            <td>:</td>
                            <td id="pdName">Your Name</td>
                        </tr>
                        <tr>
                            <td>Father's name</td>
                            <td>:</td>
                            <td id="pdFather">Father's Name</td>
                        </tr>
                        <tr>
                            <td>Mother's name</td>
                            <td>:</td>
                            <td id="pdMother">Mother's Name</td>
                        </tr>
                        <tr>
                            <td>Present Address</td>
                            <td>:</td>
                            <td id="pdAddress">Your Address</td>
                        </tr>
                        <tr>
                            <td>Date of birth</td>
                            <td>:</td>
                            <td id="pdDob">Your Date of Birth</td>
                        </tr>
                        <tr>
                            <td>Nationality</td>
                            <td>:</td>
                            <td id="pdNationality">Your Nationality</td>
                        </tr>
                        <tr>
                            <td>NID No</td>
                            <td>:</td>
                            <td id="pdNid">Your NID Number</td>
                        </tr>
                        <tr>
                            <td>Religion</td>
                            <td>:</td>
                            <td id="pdReligion">Your Religion</td>
                        </tr>
                        <tr>
                            <td>Marital Status</td>
                            <td>:</td>
                            <td id="pdMarital">Your Marital Status</td>
                        </tr>
                        <tr>
                            <td>Current Location</td>
                            <td>:</td>
                            <td id="pdLocation">Your Location</td>
                        </tr>
                        <tr>
                            <td>Covid-19 ID No</td>
                            <td>:</td>
                            <td id="pdCovid">Your Covid ID</td>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="declaration">
                <h2 class="section-title">DECLARATION</h2>
                <p>I declare hereby that all information I have presented so far are true to my knowledge. If required and where applicable, this document can be supported by authentic certificates\papers.</p>
            </div>

            <div class="signature">
                <p id="cvSignature">(Your Name)</p>
                <p>Date: ___________________</p>
            </div>
        </div>
        
        <div class="no-print" style="text-align: center; padding: 20px; border-top: 1px solid var(--border-color);">
            <button class="btn" id="editCV" style="margin-right: 10px;">Edit CV</button>
            <button class="btn" id="printCV" style="margin-right: 10px;">Print CV</button>
            <button class="btn btn-success" id="downloadPDF">Download as PDF</button>
        </div>
    </div>

    <button class="btn floating-button no-print hidden" id="scrollToTop">↑ Top</button>

    <script>
        // DOM elements
        const builder = document.getElementById('builder');
        const cvOutput = document.getElementById('cvOutput');
        const generateBtn = document.getElementById('generateCV');
        const editBtn = document.getElementById('editCV');
        const printBtn = document.getElementById('printCV');
        const downloadBtn = document.getElementById('downloadPDF');
        const resetBtn = document.getElementById('resetForm');
        const scrollToTopBtn = document.getElementById('scrollToTop');
        const photoInput = document.getElementById('photo');
        const cvPhoto = document.getElementById('cvPhoto');
        const cvPhotoPlaceholder = document.getElementById('cvPhotoPlaceholder');
        const progressBar = document.getElementById('progressBar');
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listeners
            setupEventListeners();
            
            // Set up scroll progress bar
            window.addEventListener('scroll', updateProgressBar);
            
            // Set up scroll to top button
            window.addEventListener('scroll', toggleScrollToTopButton);
            scrollToTopBtn.addEventListener('click', scrollToTop);
        });
        
        function setupEventListeners() {
            // Add education item
            document.getElementById('addEducation').addEventListener('click', addEducationItem);
            
            // Add experience item
            document.getElementById('addExperience').addEventListener('click', addExperienceItem);
            
            // Add skill item
            document.getElementById('addSkill').addEventListener('click', addSkillItem);
            
            // Photo upload
            photoInput.addEventListener('change', handlePhotoUpload);
            
            // Generate CV
            generateBtn.addEventListener('click', generateCV);
            
            // Edit CV
            editBtn.addEventListener('click', editCV);
            
            // Print CV
            printBtn.addEventListener('click', printCV);
            
            // Download PDF
            downloadBtn.addEventListener('click', downloadPDF);
            
            // Reset form
            resetBtn.addEventListener('click', resetForm);
            
            // Add event listeners to initial remove buttons
            document.querySelectorAll('.remove-education').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.parentElement.remove();
                });
            });
            
            document.querySelectorAll('.remove-experience').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.parentElement.remove();
                });
            });
            
            document.querySelectorAll('.remove-skill').forEach(btn => {
                btn.addEventListener('click', function() {
                    this.parentElement.remove();
                });
            });
        }
        
        function addEducationItem() {
            const educationItems = document.getElementById('educationItems');
            const newItem = document.createElement('div');
            newItem.className = 'form-group';
            newItem.style.border = '1px solid var(--border-color)';
            newItem.style.padding = '15px';
            newItem.style.borderRadius = '4px';
            newItem.style.marginBottom = '15px';
            
            newItem.innerHTML = `
                <div class="form-row">
                    <div class="form-group">
                        <label>Degree</label>
                        <input type="text" class="form-control degree" placeholder="Bachelor of Science">
                    </div>
                    <div class="form-group">
                        <label>Institution</label>
                        <input type="text" class="form-control institution" placeholder="University Name">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>University</label>
                        <input type="text" class="form-control university" placeholder="University Name">
                    </div>
                    <div class="form-group">
                        <label>Result</label>
                        <input type="text" class="form-control result" placeholder="GPA: 3.8/4.0">
                    </div>
                </div>
                <button class="remove-btn remove-education">Remove</button>
            `;
            educationItems.appendChild(newItem);
            
            // Add event listener to the new remove button
            newItem.querySelector('.remove-education').addEventListener('click', function() {
                newItem.remove();
            });
        }
        
        function addExperienceItem() {
            const experienceItems = document.getElementById('experienceItems');
            const newItem = document.createElement('div');
            newItem.className = 'form-group';
            newItem.style.border = '1px solid var(--border-color)';
            newItem.style.padding = '15px';
            newItem.style.borderRadius = '4px';
            newItem.style.marginBottom = '15px';
            
            newItem.innerHTML = `
                <div class="form-row">
                    <div class="form-group">
                        <label>Position</label>
                        <input type="text" class="form-control position" placeholder="Software Engineer">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" class="form-control company" placeholder="Tech Corp Inc.">
                    </div>
                </div>
                <div class="form-group">
                    <label>Duration</label>
                    <input type="text" class="form-control duration" placeholder="Jan 2020 - Present">
                </div>
                <div class="form-group">
                    <label>Responsibilities</label>
                    <textarea class="form-control responsibilities" placeholder="Describe your key responsibilities and achievements"></textarea>
                </div>
                <button class="remove-btn remove-experience">Remove</button>
            `;
            experienceItems.appendChild(newItem);
            
            // Add event listener to the new remove button
            newItem.querySelector('.remove-experience').addEventListener('click', function() {
                newItem.remove();
            });
        }
        
        function addSkillItem() {
            const skillItems = document.getElementById('skillItems');
            const newItem = document.createElement('div');
            newItem.className = 'form-group';
            newItem.style.border = '1px solid var(--border-color)';
            newItem.style.padding = '15px';
            newItem.style.borderRadius = '4px';
            newItem.style.marginBottom = '15px';
            
            newItem.innerHTML = `
                <div class="form-group">
                    <label>Skill</label>
                    <input type="text" class="form-control skill" placeholder="Project Management">
                </div>
                <div class="form-group">
                    <label>Proficiency Level</label>
                    <select class="form-control proficiency">
                        <option value="Beginner">Beginner</option>
                        <option value="Intermediate">Intermediate</option>
                        <option value="Advanced">Advanced</option>
                        <option value="Expert">Expert</option>
                    </select>
                </div>
                <button class="remove-btn remove-skill">Remove</button>
            `;
            skillItems.appendChild(newItem);
            
            // Add event listener to the new remove button
            newItem.querySelector('.remove-skill').addEventListener('click', function() {
                newItem.remove();
            });
        }
        
        function handlePhotoUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    cvPhoto.src = event.target.result;
                    cvPhoto.classList.remove('hidden');
                    cvPhotoPlaceholder.classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }
        }
        
        function generateCV() {
            // Basic info
            document.getElementById('cvName').textContent = document.getElementById('fullName').value || 'Your Name';
            document.getElementById('cvMobile').textContent = `Mobile: ${document.getElementById('mobile').value || 'Your Number'}`;
            document.getElementById('cvEmail').textContent = `Email: ${document.getElementById('email').value || 'Your Email'}`;
            document.getElementById('cvAddress').textContent = document.getElementById('address').value || 'Your Address';
            document.getElementById('cvObjective').textContent = document.getElementById('careerObjective').value || 'Your career objective goes here.';
            document.getElementById('cvLanguage').textContent = document.getElementById('languageProficiency').value || 'Your language proficiency details.';
            document.getElementById('cvInterests').textContent = document.getElementById('interests').value || 'Your interests and hobbies.';
            document.getElementById('cvSignature').textContent = `(${document.getElementById('fullName').value || 'Your Name'})`;
            
            // Personal details
            document.getElementById('pdName').textContent = document.getElementById('fullName').value || 'Your Name';
            document.getElementById('pdFather').textContent = document.getElementById('fatherName').value || 'Father\'s Name';
            document.getElementById('pdMother').textContent = document.getElementById('motherName').value || 'Mother\'s Name';
            document.getElementById('pdAddress').textContent = document.getElementById('presentAddress').value || 'Your Address';
            document.getElementById('pdDob').textContent = document.getElementById('dob').value || 'Your Date of Birth';
            document.getElementById('pdNationality').textContent = document.getElementById('nationality').value || 'Your Nationality';
            document.getElementById('pdNid').textContent = document.getElementById('nid').value || 'Your NID Number';
            document.getElementById('pdReligion').textContent = document.getElementById('religion').value || 'Your Religion';
            document.getElementById('pdMarital').textContent = document.getElementById('maritalStatus').value || 'Your Marital Status';
            document.getElementById('pdLocation').textContent = document.getElementById('currentLocation').value || 'Your Location';
            document.getElementById('pdCovid').textContent = document.getElementById('covidId').value || 'Your Covid ID';
            
            // Education
            const cvEducation = document.getElementById('cvEducation');
            cvEducation.innerHTML = '';
            
            document.querySelectorAll('#educationItems .education-item, #educationItems .form-group').forEach(item => {
                const degree = item.querySelector('.degree')?.value;
                const institution = item.querySelector('.institution')?.value;
                const university = item.querySelector('.university')?.value;
                const result = item.querySelector('.result')?.value;
                
                if (degree || institution || university || result) {
                    const educationHTML = `
                        <div class="education-item">
                            <div class="item-header">
                                <div>
                                    <span class="item-title">${degree || 'Degree'}</span>
                                    <span class="item-subtitle">${institution ? ', ' + institution : ''}</span>
                                </div>
                            </div>
                            <p>${university || 'University'}</p>
                            <p>${result || 'Result'}</p>
                        </div>
                    `;
                    cvEducation.innerHTML += educationHTML;
                }
            });
            
            // Show/hide education section based on content
            document.getElementById('cvEducationSection').style.display = 
                cvEducation.innerHTML.trim() === '' ? 'none' : 'block';
            
            // Experience
            const cvExperience = document.getElementById('cvExperience');
            cvExperience.innerHTML = '';
            
            document.querySelectorAll('#experienceItems .experience-item, #experienceItems .form-group').forEach(item => {
                const position = item.querySelector('.position')?.value;
                const company = item.querySelector('.company')?.value;
                const duration = item.querySelector('.duration')?.value;
                const responsibilities = item.querySelector('.responsibilities')?.value;
                
                if (position || company || duration || responsibilities) {
                    const experienceHTML = `
                        <div class="experience-item">
                            <div class="item-header">
                                <div>
                                    <span class="item-title">${position || 'Position'}</span>
                                    <span class="item-subtitle">${company ? ' • ' + company : ''}</span>
                                </div>
                                <div class="item-date">${duration || 'Duration'}</div>
                            </div>
                            ${responsibilities ? `<p>${responsibilities.replace(/\n/g, '<br>')}</p>` : ''}
                        </div>
                    `;
                    cvExperience.innerHTML += experienceHTML;
                }
            });
            
            // Show/hide experience section based on content
            document.getElementById('cvExperienceSection').style.display = 
                cvExperience.innerHTML.trim() === '' ? 'none' : 'block';
            
            // Skills
            const cvSkills = document.getElementById('cvSkills');
            cvSkills.innerHTML = '';
            
            document.querySelectorAll('#skillItems .skill-item, #skillItems .form-group').forEach(item => {
                const skill = item.querySelector('.skill')?.value;
                const proficiency = item.querySelector('.proficiency')?.value;
                
                if (skill) {
                    const skillItem = document.createElement('li');
                    skillItem.className = 'skill-item';
                    skillItem.textContent = proficiency ? `${skill} (${proficiency})` : skill;
                    cvSkills.appendChild(skillItem);
                }
            });
            
            // Show/hide skills section based on content
            document.getElementById('cvSkillsSection').style.display = 
                cvSkills.innerHTML.trim() === '' ? 'none' : 'block';
            
            // Show CV and hide builder
            builder.classList.add('hidden');
            cvOutput.classList.remove('hidden');
            scrollToTop();
        }
        
        function editCV() {
            builder.classList.remove('hidden');
            cvOutput.classList.add('hidden');
            scrollToTop();
        }
        
        function printCV() {
            window.print();
        }
        
        function downloadPDF() {
            const element = document.getElementById('cvOutput');
            const opt = {
                margin: 10,
                filename: 'my_cv.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };
            
            // Show loading state
            downloadBtn.innerHTML = 'Generating PDF...';
            downloadBtn.disabled = true;
            
            // Generate PDF
            html2pdf().from(element).set(opt).save().then(() => {
                // Restore button state
                downloadBtn.innerHTML = 'Download as PDF';
                downloadBtn.disabled = false;
            });
        }
        
        function resetForm() {
            if (confirm('Are you sure you want to reset the form? All your data will be lost.')) {
                document.getElementById('builder').reset();
                document.getElementById('educationItems').innerHTML = `
                    <div class="form-group" style="border: 1px solid var(--border-color); padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Degree</label>
                                <input type="text" class="form-control degree">
                            </div>
                            <div class="form-group">
                                <label>Institution</label>
                                <input type="text" class="form-control institution">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>University</label>
                                <input type="text" class="form-control university">
                            </div>
                            <div class="form-group">
                                <label>Result</label>
                                <input type="text" class="form-control result">
                            </div>
                        </div>
                        <button class="remove-btn remove-education">Remove</button>
                    </div>
                `;
                
                document.getElementById('experienceItems').innerHTML = `
                    <div class="form-group" style="border: 1px solid var(--border-color); padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Position</label>
                                <input type="text" class="form-control position">
                            </div>
                            <div class="form-group">
                                <label>Company</label>
                                <input type="text" class="form-control company">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Duration</label>
                            <input type="text" class="form-control duration">
                        </div>
                        <div class="form-group">
                            <label>Responsibilities</label>
                            <textarea class="form-control responsibilities"></textarea>
                        </div>
                        <button class="remove-btn remove-experience">Remove</button>
                    </div>
                `;
                
                document.getElementById('skillItems').innerHTML = `
                    <div class="form-group" style="border: 1px solid var(--border-color); padding: 15px; border-radius: 4px; margin-bottom: 15px;">
                        <div class="form-group">
                            <label>Skill</label>
                            <input type="text" class="form-control skill">
                        </div>
                        <div class="form-group">
                            <label>Proficiency Level</label>
                            <select class="form-control proficiency">
                                <option value="Beginner">Beginner</option>
                                <option value="Intermediate">Intermediate</option>
                                <option value="Advanced">Advanced</option>
                                <option value="Expert">Expert</option>
                            </select>
                        </div>
                        <button class="remove-btn remove-skill">Remove</button>
                    </div>
                `;
                
                // Reset photo
                photoInput.value = '';
                cvPhoto.src = '';
                cvPhoto.classList.add('hidden');
                cvPhotoPlaceholder.classList.remove('hidden');
                
                // Reattach event listeners
                setupEventListeners();
            }
        }
        
        function updateProgressBar() {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollProgress = (scrollTop / scrollHeight) * 100;
            progressBar.style.width = scrollProgress + '%';
        }
        
        function toggleScrollToTopButton() {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.remove('hidden');
            } else {
                scrollToTopBtn.classList.add('hidden');
            }
        }
        
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    </script>
</body>
</html>
